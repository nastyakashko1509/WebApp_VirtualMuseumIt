{% extends "base.html" %}

{% block title %}Корзина{% endblock %}

{% block content %}
<h1>Моя корзина</h1>

{% if cart_items %}
    <ul>
        {% for item in cart_items %}
            <li itemscope itemtype="https://schema.org/Product" itemid="#ticket{{ item.id }}">
                <strong itemprop="name">{{ item.ticket.name }}</strong> —
                <span itemprop="price">{{ item.ticket.price }}</span> ₽ —
                <span itemprop="category">{{ item.ticket.get_visitor_age_display }}</span>,
                <span itemprop="dayType">{{ item.ticket.get_day_type_display }}</span>,
                Фото: <span itemprop="photoPermission">{% if item.ticket.photo_permission_fee %}Да{% else %}Нет{% endif %}</span><br>
                Количество: <span itemprop="quantity">{{ item.quantity }}</span>

                <form action="{% url 'update_cart_quantity' item.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" name="action" value="decrease">-</button>
                    <button type="submit" name="action" value="increase">+</button>
                </form>

                <form action="{% url 'remove_from_cart' item.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" tabindex="2">Удалить</button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p>Ваша корзина пуста.</p>
{% endif %}

<form action="{% url 'checkout' %}" method="get">
    <button type="submit" 
            title="Переход на страницу оплаты"
            accesskey="x"
            tabindex="-1">Оплатить</button>
</form>

<p><a href="{% url 'museum_info' %}"
      tabindex="1">← Вернуться назад</a></p>
{% endblock %}
