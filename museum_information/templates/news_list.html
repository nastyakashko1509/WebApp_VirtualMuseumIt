{% extends "base.html" %}

{% block title %}Новости музея{% endblock %}

{% block content %}
<h1 class="news-title">Новости музея</h1>

<div class="news-container">
    {% if all_news %}
        {% for news in all_news %}
            <div class="news-card">
                <h2 class="news-headline">{{ news.title }}</h2>
                
                {% if news.image %}
                    <img class="news-image" src="{{ news.image.url }}" alt="Изображение новости">
                {% endif %}
                
                <p class="news-short">{{ news.first_sentence }}</p>

                {% if news.full_content %}
                    <!-- скрытый checkbox -->
                    <input type="checkbox" id="toggle-{{ news.id }}" class="toggle-full" />
                    <label for="toggle-{{ news.id }}" class="read-more-label">Читать далее</label>
                    
                    <div class="news-full">
                        <p>{{ news.full_content }}</p>
                    </div>
                {% endif %}
                
                <p class="news-date"><small>Опубликовано: {{ news.published_at|date:"d.m.Y H:i" }}</small></p>
            </div>
        {% endfor %}
    {% else %}
        <p>Новостей пока нет.</p>
    {% endif %}
</div>

<h1>Дополнительные новости</h1>
<div>
    <a href="https://belta.by">Посмотреть все свежие новости в Беларуси!</a>
</div>

<style>
.news-title {
    font-family: Georgia, serif;
    color: #4b0082;
    text-align: center;
    margin-bottom: 30px;
}

.news-container {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    justify-content: center;
}

.news-card {
    border: 2px solid #4b0082;
    border-radius: 10px;
    padding: 15px;
    width: 280px;
    background-color: #f9f9ff;
    box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
}

.news-headline {
    font-size: 1.2em;
    color: #2e0854;
    margin-bottom: 10px;
}

.news-image {
    width: 100%;
    height: auto; 
    object-fit: contain; 
    border-radius: 8px;
    margin-bottom: 10px;
    background-color: #f0f0f0; 
}

.news-short {
    max-height: 3em;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2; 
    line-clamp: 2;
    -webkit-box-orient: vertical;
    margin-bottom: 10px;
}

.news-full {
    display: none;
    margin-top: 10px;
}

.toggle-full {
    display: none;
}

.read-more-label {
    display: inline-block;
    margin-bottom: 10px;
    color: #4b0082;
    font-weight: bold;
    cursor: pointer;
}

.read-more-label:hover {
    text-decoration: underline;
}

.toggle-full:checked + .read-more-label + .news-full {
    display: block;
}

.news-full p {
    column-count: 2;
    column-gap: 15px;
    text-align: justify;
    font-size: 0.95em;
    line-height: 1.4;
}

.news-date {
    font-size: 0.8em;
    color: #555;
    margin-top: auto;
}

@media (max-width: 900px) {
    .news-full p {
        column-count: 1;
    }
    .news-card {
        width: 100%;
    }
}
</style>

{% endblock %}
